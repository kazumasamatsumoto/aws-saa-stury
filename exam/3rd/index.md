オリジンアクセスアイデンティティ（OAI）

CloudFront と S3 の間のセキュリティを強化するための豊富尾

S3 バケットに対する直接的なパブリックアクセスを防ぐ

オリジンアクセスアイデンティティを使用することで、CloudFront ディストリビューションだけが S3 のオブジェクトにアクセスができるようにして、他のユーザーからの直接アクセスを遮断できる

基盤となるオペレーティングシステムへのアクセスが必要な場合 RDS for Oracle ではアクセスができないため、EC2 上での構築が必須となる。

サーバーレスソリューションへアプリケーションの移行を考えている

既存データと新規データを自動的に分析する必要がある。

データは S3 に保存されている

データは暗号化され、別の AWS リージョンにレプリケートされる

企業は「運用負荷を最小限にしたい」

既存の S3 バケットにデータをロードし、

S3 クロスリージョンレプリケーション（CRR）を使用して、暗号化されたデータを他のリージョンに複製する

サーバーサイド暗号化には Amazon S3 管理用の暗号化キー（SSE-S3）を使用し、データクエリには Amazon Athena を利用する

SSE-S3 は S3 自身がキーを管理し、データのアップロード時に自動的に暗号化される。

S3 で管理されたキーを使うことで運用負荷が最小化される。

また Amazon Athena はサーバーレスソリューションであり、S3 上に保存されたデータを直接クエリできるため、Athena を使用することでインフラの管理が不要になる。

ある、医療データ分析会社は、AWS 上でアプリケーションを運用しています。この会社は、外部パートナーの提供する特定のサービスに接続する必要があります。

パートナーのサービスは、パートナーの VPC でホストされています。

セキュリティチームによると、接続はインターネットに公開されていないプライベートなものでなければならず、

ターゲットサービスへのアクセスのみ許可されるべきです。

また、接続は会社の VPC からのみ開始できるようにする必要があります。

パートナーにターゲットサービス用の VPC エンドポイントを作成させ、AWS PrivateLink を使ってそのサービスに接続します。

すべての AWS アカウントのルートユーザーのメールアドレスを、少数の管理者が受信できる配信リストに変更し、AWS Organizations コンソールや CLI を使ってアカウントの代替連絡先を設定します。

ルートユーザーのメールアドレスを周夫数の管理者向けの配信リストに変更し、AWS Organizations コンソールまたは CLI で大体連絡先を設定することで、通知が必要最小限の担当者に受信され、見逃されることが回避される。
また通知の受信範囲をアカウント管理者に限定でき、管理がよういになる。

AWS 上で取引処理アプリケーションを運用しています。

新しい取引が発生するたびに、Amazon EC2 インスタンス上で単一のアベイラビリティゾーンにホストされた JMS(Java Message Service）ベースのキューにメッセージが公開される

メッセージは別の EC2 インスタンス上で稼働するアプリケーションによって処理され、その詳細がさらに別の EC2 インスタンス上にある MySQL データベースに保存されます

すべての EC2 インスタンスは同じアベイラビリティゾーンに配置されています。

システムの可用性を最大化しつつ、運用負荷を最小限に抑えるためにアーキテクチャを再設計する必要があります。

Amazon MQ は JMS と互換があり、またアクティブ・スタンバイ構成に移行することで、キューの管理にかかる運用負荷が削減される。これにより、メッセージキューの可用性が向上し、冗長化された構成で運用が可能になる。

あるシンクタンクでは、毎日市場のデータを Amazon S3 バケットにファイルを保存し、分析しています。

同社は、これらのファイルを分析用の S3 バケットにコピーし、分析結果を Amazon QuickSight で可視化しています。

最近、同社はより多くの分析タスクを実行するようになり、以前より多くのファイルを元の S3 バケットに保存し始めました。

そこで一部のタスクを自動化したいと考えております。

元の S3 バケットにファイルが届いた際、自動的に分析用に S3 バケットにファイルを移動させようと考えています。また、コピーされたデータに対して AWS Glue で必要な処理をしたのちに、データを Amazon SageMaker Pipelines に送信するプロセスも導入したいと考えています。

運用負荷を最小限に抑えながらこれらの要件を満たすため、ソリューションアーキテクトは何をすべきでしょうか？

S3 バケット間で S3 レプリケーションを設定します。分析用の S3 バケットに Amazon EventBridge（CloudWatch Events）にイベント通知を送信するように設定し、ObjectCreated ルールを設定します。ルールのターゲットとして Glue ジョブと SageMaker Pipelines を設定します。

ユーザーに対してニュースやコンテンツをできるだけ低いレイテンシーで提供するためには、どのような AWS アーキテクチャ（どのリージョン配置やコンテンツ配信の方法）を採用すべきか？という問題

・配信方式の選択

静的および動的コンテンツの双方を低いレイテンシーで提供するには、Amazon CloudFront のようなエッジキャッシュサービスが有効か、または複数リージョンに展開して Route53 のルーティングポリシーを利用する方法があるか。

・アーキテクチャの比較

単一リージョンで CloudFront をオリジンとして利用する方法と、複数リージョンに展開して Route53 で遅延ルーティングする方法とのトレードオフについて、低レイテンシー実現の観点から評価すること

つまり、どのアーキテクチャが、速くかつ効率的にユーザーにコンテンツを配信できるかという点について、設計の選択肢とその理由を問われています。

AWS Global Accelerator + NLB + EC2 Auto Scaling

・AWS Global Accelerator は AWS のグローバルネットワークを利用して、ユーザーにとって最も近いエッジロケーションからトラフィックをルーティングします。

・Global Accelerator は TCP/UDP 両方のトラフィックをサポートし、静的 IP アドレスをフロントエンドとして提供するため、ユーザーは常に同じ IP アドレスでアクセスできます。

・リクエストは Global Accelerator 経由でネットワークロードバランサー（NLB）に転送され、そこで EC2Auto Scaling グループに属するインスタンスへルーティングされます。これにより高可用性と低レイテンシーが確保されます。

・問題のポイント

1. パフォーマンス向上（スケーリング）

単一の EC2 インスタンスではトラフィックが増えた時にパフォーマンスが低下するため、リソースを水平にスケールアウトする必要があります。

2. コスト効率

・余分なコストをかけずにトラフィックの増減に応じてリソースを自動的に調整できる仕組みが望まれます。

3. 可用性の向上

・単一障害点（シングルポイント・オブ・フェイラー）を避け、障害があった場合でもサービス継続できる高可用なアーキテクチャにする必要があります。

正解：

・データベースの移行
MySQL データベースを Amazon Aurora MySQL に移行する
・ウェブアプリケーションのスケーリング
AMI を作成して、起動テンプレートを使用して Auto Scaling グループ（ASG）を構築します。
・コスト効率の向上
Spot Fleet を活用することで、通常のオンデマンドインスタンスよりも低コストで EC2 インスタンスを利用することができ、全体の運用コストを削減できます。
・ロードバランシング
アプリケーションロードバランサー（ALB）を利用することで、複数のウェブサーバー間にトラフィックを分散し、各サーバーへの負荷均等化が図られます。

AWS Spot Fleet は複数のスポットインスタンスのリクエストを一括で管理するための機能です。
・グループ管理
ユーザー定義した条件（ターゲットとなる容量、許容するインスタンスタイプ、価格制限など）に基づいて、複数のスポットインスタンスリクエストを一つのグループ（Fleet）として一括管理します。

・自動最適化
Spot Fleet は、現在利用可能なスポットインスタンスの中から最もコスト効率が良いものを自動的に選択肢、ターゲット容量を達成するためにリクエストを発行します。また途中でスポットインスタンスが中断された場合でも、必要なキャパシティを維持するために自動的に新たなインスタンスをリクエストします。

・コスト削減
スポットインスタンスはオンデマンドインスタンスに比べて低価格で提供されるため、Spot Fleet を利用することで大幅なコスト削減が可能

AWS Spot Fleet は、スポットインスタンスの管理と自動調整を行い、最適なコストで必要な計算リソースを確保するための仕組みです。これにより、例えば AutoScaling 環境で動的にリソースを増減しながら場合に、経済的にスケーリングが実現できます。

CloudWatchのコンポジットアラームは、複数の個別アラームの状態をもとに高度な監視条件を設定し、不要なアラームの発報を防ぎながら、システムの健全性を効果的に把握するための仕組み

マルチAZ構成：同期レプリケーション

リードレプリカ：非同期レプリケーション