<?xml version="1.0" encoding="UTF-8"?>
<!-- Do not edit this file with editors other than draw.io -->
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg xmlns="http://www.w3.org/2000/svg" style="background-color: rgb(255, 255, 255);" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" width="822px" height="702px" viewBox="-0.5 -0.5 822 702">
  <defs/>
  <g>
    <!-- Title -->
    <rect x="40" y="40" width="740" height="30" fill="none" stroke="none"/>
    <g transform="translate(-0.5 -0.5)">
      <text x="410" y="60" fill="#000000" font-family="Helvetica" font-size="16px" text-anchor="middle" font-weight="bold">KMS Key Lifecycle with BYOK</text>
    </g>

    <!-- BYOK Process Box -->
    <rect x="40" y="520" width="740" height="160" rx="9" ry="9" fill="#f5f5f5" stroke="#666666" stroke-dasharray="3 3" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <text x="410" y="540" fill="#000000" font-family="Helvetica" font-size="14px" text-anchor="middle" font-weight="bold">BYOK (Bring Your Own Key)</text>
      
      <!-- BYOK Details -->
      <text x="60" y="570" fill="#000000" font-family="Helvetica" font-size="12px">• 外部のキー、キーマテリアルをインポート</text>
      
      <text x="60" y="600" fill="#000000" font-family="Helvetica" font-size="12px" font-weight="bold">制約（サポートされない機能）:</text>
      <text x="80" y="620" fill="#000000" font-family="Helvetica" font-size="12px">• キーの自動ローテーション</text>
      <text x="80" y="640" fill="#000000" font-family="Helvetica" font-size="12px">• バックアップ</text>
      <text x="80" y="660" fill="#000000" font-family="Helvetica" font-size="12px">• 論理削除</text>
      
      <!-- Import Process -->
      <text x="400" y="600" fill="#000000" font-family="Helvetica" font-size="12px" font-weight="bold">インポート操作:</text>
      <text x="420" y="620" fill="#000000" font-family="Helvetica" font-size="12px">1. KMSから公開鍵をダウンロード</text>
      <text x="420" y="640" fill="#000000" font-family="Helvetica" font-size="12px">2. その公開鍵でユーザーのキーマテリアルを暗号化</text>
      <text x="420" y="660" fill="#000000" font-family="Helvetica" font-size="12px">3. AWS環境にアップロード</text>
    </g>

    <!-- Original States and Arrows -->
    <!-- ... (previous states and arrows remain unchanged) ... -->
    <!-- States -->
    <!-- Creating State -->
    <rect x="40" y="160" width="120" height="60" rx="9" ry="9" fill="#dae8fc" stroke="#000000" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <text x="100" y="184" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Creating</text>
      <text x="100" y="200" fill="#000000" font-family="Helvetica" font-size="10px" text-anchor="middle">キーマテリアルの生成中</text>
      <text x="100" y="214" fill="#000000" font-family="Helvetica" font-size="10px" text-anchor="middle">インポート待ち</text>
    </g>
    
    <!-- Enabled State -->
    <rect x="240" y="160" width="120" height="60" rx="9" ry="9" fill="#b9e0a5" stroke="#000000" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <text x="300" y="184" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Enabled</text>
      <text x="300" y="200" fill="#000000" font-family="Helvetica" font-size="10px" text-anchor="middle">暗号化操作が可能</text>
      <text x="300" y="214" fill="#000000" font-family="Helvetica" font-size="10px" text-anchor="middle">監査ログが記録</text>
    </g>
    
    <!-- Disabled State -->
    <rect x="440" y="160" width="120" height="60" rx="9" ry="9" fill="#f8cecc" stroke="#000000" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <text x="500" y="184" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Disabled</text>
      <text x="500" y="200" fill="#000000" font-family="Helvetica" font-size="10px" text-anchor="middle">暗号化操作が不可</text>
      <text x="500" y="214" fill="#000000" font-family="Helvetica" font-size="10px" text-anchor="middle">再有効化が可能</text>
    </g>
    
    <!-- Pending Deletion State -->
    <rect x="340" y="300" width="120" height="60" rx="9" ry="9" fill="#ffe6cc" stroke="#000000" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <text x="400" y="324" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Pending Deletion</text>
      <text x="400" y="340" fill="#000000" font-family="Helvetica" font-size="10px" text-anchor="middle">7-30日の待機期間</text>
      <text x="400" y="354" fill="#000000" font-family="Helvetica" font-size="10px" text-anchor="middle">削除のキャンセル可能</text>
    </g>

    <!-- Deleted State -->
    <rect x="340" y="420" width="120" height="60" rx="9" ry="9" fill="#f8cecc" stroke="#000000" pointer-events="all"/>
    <g transform="translate(-0.5 -0.5)">
      <text x="400" y="444" fill="#000000" font-family="Helvetica" font-size="12px" text-anchor="middle">Deleted</text>
      <text x="400" y="460" fill="#000000" font-family="Helvetica" font-size="10px" text-anchor="middle">復元は不可能</text>
      <text x="400" y="474" fill="#000000" font-family="Helvetica" font-size="10px" text-anchor="middle">メタデータは保持</text>
    </g>

    <!-- Arrows with labels -->
    <!-- Creating to Enabled -->
    <path d="M 160 190 L 233.63 190" fill="none" stroke="#000000" stroke-miterlimit="10"/>
    <path d="M 238.88 190 L 231.88 193.5 L 233.63 190 L 231.88 186.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10"/>
    
    <!-- Enabled to Disabled -->
    <path d="M 360 190 L 433.63 190" fill="none" stroke="#000000" stroke-miterlimit="10"/>
    <path d="M 438.88 190 L 431.88 193.5 L 433.63 190 L 431.88 186.5 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10"/>
    <text x="390" y="180" fill="#000000" font-family="Helvetica" font-size="10px">無効化</text>
    
    <!-- Disabled to Enabled -->
    <path d="M 440 160 L 440 130 L 300 130 L 300 153.63" fill="none" stroke="#000000" stroke-miterlimit="10"/>
    <path d="M 300 158.88 L 296.5 151.88 L 300 153.63 L 303.5 151.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10"/>
    <text x="370" y="120" fill="#000000" font-family="Helvetica" font-size="10px">再有効化</text>
    
    <!-- Enabled/Disabled to Pending Deletion -->
    <path d="M 300 220 L 300 250 L 400 250 L 400 293.63" fill="none" stroke="#000000" stroke-miterlimit="10"/>
    <path d="M 400 298.88 L 396.5 291.88 L 400 293.63 L 403.5 291.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10"/>
    <path d="M 500 220 L 500 250 L 400 250 L 400 293.63" fill="none" stroke="#000000" stroke-miterlimit="10"/>
    <path d="M 400 298.88 L 396.5 291.88 L 400 293.63 L 403.5 291.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10"/>
    <text x="420" y="270" fill="#000000" font-family="Helvetica" font-size="10px">削除スケジュール</text>

    <!-- Pending Deletion to Deleted -->
    <path d="M 400 360 L 400 413.63" fill="none" stroke="#000000" stroke-miterlimit="10"/>
    <path d="M 400 418.88 L 396.5 411.88 L 400 413.63 L 403.5 411.88 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10"/>
    <text x="420" y="390" fill="#000000" font-family="Helvetica" font-size="10px">待機期間後</text>

    <!-- Pending Deletion to Enabled -->
    <path d="M 340 330 L 260 330 L 260 226.37" fill="none" stroke="#000000" stroke-miterlimit="10" stroke-dasharray="3 3"/>
    <path d="M 260 221.12 L 263.5 228.12 L 260 226.37 L 256.5 228.12 Z" fill="#000000" stroke="#000000" stroke-miterlimit="10"/>
    <text x="270" y="320" fill="#000000" font-family="Helvetica" font-size="10px">キャンセル</text>

    <!-- BYOK Arrow -->
    <path d="M 100 520 L 100 226.37" fill="none" stroke="#666666" stroke-miterlimit="10" stroke-dasharray="3 3"/>
    <path d="M 100 221.12 L 103.5 228.12 L 100 226.37 L 96.5 228.12 Z" fill="#666666" stroke="#666666" stroke-miterlimit="10"/>
    <text x="120" y="400" fill="#666666" font-family="Helvetica" font-size="10px">BYOK</text>
  </g>
</svg> 