# Amazon Aurora

## アーキテクチャ

### 機能

- インスタンスとストレージの分離構造
- 3 AZ にまたがる 6 個のデータボリューム
- クォーラムモデルによる書き込み（6 個中 4 個）と読み込み（6 個中 3 個）
- プライマリ DB インスタンス（Writer）による読み書き
- 最大 15 個の Aurora レプリカ（Reader）
- クラスターボリュームによる 3 AZ データレプリケーション
- 複数種類のエンドポイント（プライマリ、レプリカ、カスタム）

### 用途

- 高可用性が必要なミッションクリティカルなアプリケーション
- 大規模なデータベース処理が必要なシステム
- グローバルに展開するサービス
- 読み取り処理が多い Web アプリケーション

### 目的

- データの高可用性の実現
- 耐障害性の向上
- 読み取り性能の最適化
- 運用管理の簡素化

### 一般向け解説

データを安全に保管する仕組みを例えると：

```
例：重要書類の保管システム
- 複数の金庫に同じ書類のコピーを保管
- 一部の金庫が壊れても大丈夫
- 複数人で同時に書類を確認可能
```

## 高可用性とフェイルオーバー

### 機能

- 60 秒未満での自動フェイルオーバー
- クラスターエンドポイントによる自動接続切り替え
- レプリカの優先度設定
- クラスターキャッシュ管理

### 用途

- 24 時間 365 日の運用が必要なシステム
- ダウンタイムを最小限に抑えたいサービス
- 災害対策が必要なアプリケーション
- 重要な業務システム

### 目的

- サービス継続性の確保
- ダウンタイムの最小化
- 障害時の影響軽減
- パフォーマンスの維持

### 一般向け解説

システムの切り替えを例えると：

```
例：コンビニエンスストア
- 店長が急に休んでも副店長が対応
- お客様は通常通り買い物ができる
- 切り替えはほぼ瞬時に完了
```

## グローバルデータベース

### 機能

- 1 つのプライマリリージョンと最大 5 つのセカンダリリージョン
- 60 秒未満でのリージョン間データコピー
- 最短レイテンシーリージョンへの自動接続
- クロスリージョンレプリケーション

### 用途

- グローバルに展開する Web サービス
- 世界中にユーザーがいるアプリケーション
- 災害対策が必要なシステム
- 地域ごとのデータ分析

### 目的

- グローバルな可用性の確保
- 地理的な冗長性の実現
- アクセス遅延の最小化
- リージョン障害への対応

### 一般向け解説

世界中でのデータ共有を例えると：

```
例：国際的な図書館システム
- 世界中の支店で同じ本を読める
- 最寄りの図書館ですぐに利用可能
- 本館が使えなくても支店で対応可能
```

## マルチマスタークラスター

### 機能

- 複数の読み書き可能インスタンス（最大 2 つ）
- MySQL 互換
- 分散型の書き込み処理
- インスタンス間の自動同期

### 用途

- 書き込み処理の分散が必要なアプリケーション
- 高可用性が重要なシステム
- 地理的に分散したサービス
- 書き込みワークロードの多いシステム

### 目的

- 書き込み性能の向上
- システムの可用性強化
- 単一障害点の排除
- 運用の柔軟性確保

### 一般向け解説

複数の管理者による同時作業を例えると：

```
例：大型スーパーマーケット
- 複数のレジで同時に会計処理
- どのレジでも在庫更新が可能
- 一つのレジが故障しても営業継続
```

## Aurora Serverless

### 機能

- 自動的なリソース調整
- ACU（Aurora Capacity Unit）による柔軟なスケーリング
- QueryEditor による SQL 実行
- Version 1 と Version 2 の選択肢

### 用途

- 変動の大きいワークロード
- 開発・テスト環境
- 新規プロジェクト
- 季節性のあるアプリケーション

### 目的

- コスト最適化
- 運用管理の簡素化
- リソースの効率利用
- 柔軟なスケーリング

### 一般向け解説

必要に応じて規模を変更できる仕組みを例えると：

```
例：レンタルオフィス
- 利用状況に応じて部屋の広さを自動調整
- 使った分だけの支払い
- 急な来客でも自動で対応
```

## バックアップと復元

### 機能

- 連続的なバックアップ（1-35 日間）
- スナップショット作成
- クローン機能
- バックトラック機能（最大 72 時間）

### 用途

- 定期的なバックアップ要件
- 災害復旧計画
- テスト環境の作成
- 操作ミスからの復旧

### 目的

- データ保護の確保
- 迅速な復旧の実現
- コンプライアンス対応
- 運用リスクの軽減

### 一般向け解説

データを安全に守る仕組みを例えると：

```
例：写真のバックアップ
- クラウドへの自動保存
- 過去の写真をいつでも確認可能
- 誤って削除しても復元できる
- タイムマシンのように過去に戻れる
```

## バックトラック機能

### 機能

- 最大 72 時間の巻き戻し
- データベースの再作成不要
- 短時間での復旧
- 一時的な処理停止

### 用途

- 操作ミスからの復旧
- テストデータのリセット
- 開発時のデバッグ
- クイックリカバリ

### 目的

- 復旧時間の短縮
- 運用負荷の軽減
- ヒューマンエラー対策
- データ整合性の維持

### 一般向け解説

時間を巻き戻す機能を例えると：

```
例：ゲームのセーブポイント
- 失敗したら少し前に戻れる
- 再開時に状態を完全復元
- 巻き戻しは素早く完了
- 必要な分だけ戻すことが可能
```
