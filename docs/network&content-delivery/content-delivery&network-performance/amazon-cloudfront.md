# Amazon CloudFront

## 概要

Amazon CloudFront は、AWS が提供する CDN（Content Delivery Network）サービスです。世界中に配置された配信拠点（PoP: Point of Presence）を通じて、コンテンツを高速に配信します。

## 技術詳細

### 機能

1. **コンテンツ配信**

   - グローバルな配信ネットワーク
   - キャッシュによる高速配信
   - コンテンツ圧縮（gzip）対応

2. **キャッシュ管理**

   - TTL（Time To Live）設定
   - キャッシュポリシーの柔軟な設定
   - キャッシュの即時無効化

3. **セキュリティ機能**

   - SSL/TLS 証明書管理
   - WAF（Web Application Firewall）連携
   - DDoS 対策
   - アクセス制御
     - 地域制限
     - IP アドレス制限
     - 署名付き URL/Cookie

4. **エッジコンピューティング**
   - CloudFront Functions
     - JavaScript による軽量な処理
     - 毎秒 1000 万リクエスト以上
   - Lambda@Edge
     - 複雑な処理に対応
     - Node.js/Python サポート

### 用途

1. **Web サイト配信**

   - 静的コンテンツの配信
   - 動的コンテンツの最適化
   - SPA（Single Page Application）

2. **メディア配信**

   - 画像・動画の配信
   - ライブストリーミング
   - オンデマンド動画

3. **アプリケーション**
   - API の高速化
   - モバイルアプリのコンテンツ配信
   - ゲームコンテンツの配信

### 目的

1. **パフォーマンス向上**

   - レイテンシーの削減
   - 帯域幅の最適化
   - オリジンサーバーの負荷軽減

2. **コスト最適化**

   - データ転送コストの削減
   - キャッシュによる処理効率化
   - リソース利用の最適化

3. **セキュリティ強化**
   - エッジでの防御
   - アクセス制御
   - SSL/TLS による暗号化

### セキュリティ機能の詳細

1. **署名付き URL**

   - **機能**:
     - 特定のコンテンツへのアクセス制限
     - URL ごとのアクセス制御
     - 有効期限の設定
   - **用途**:
     - 有料コンテンツの配信
     - 一時的なアクセス許可
     - 個別ファイルの保護
   - **利用シーン**:
     - ダウンロード商品の配信
     - 期間限定コンテンツ
     - 個別課金コンテンツ

2. **署名付き Cookie**
   - **機能**:
     - 複数コンテンツへのアクセス制御
     - Cookie ベースの認証
     - エッジロケーションでの評価
   - **用途**:
     - 会員制サイトのコンテンツ保護
     - 動画ストリーミングサービス
     - 有料会員向けサービス
   - **利用シーン**:
     - 会員制サイト
     - 定額制コンテンツサービス
     - 企業向けポータル

### エッジ関数の詳細

1. **CloudFront Functions**

   - **機能**:
     - JavaScript による軽量処理
     - 超高速な実行（ミリ秒単位）
     - 大規模スケーリング
   - **用途**:
     - キャッシュキーの正規化
     - ヘッダーの操作
     - URL リダイレクト
   - **特徴**:
     - メモリ制限: 2MB
     - 実行時間: ミリ秒単位
     - リクエスト数: 毎秒 1000 万以上

2. **Lambda@Edge**
   - **機能**:
     - 複雑な処理の実行
     - Node.js/Python サポート
     - 柔軟なカスタマイズ
   - **用途**:
     - A/B テスティング
     - 動的コンテンツ生成
     - 高度な認証処理
   - **特徴**:
     - メモリ: 128MB ～ 3,008MB
     - 実行時間: 最大 5 秒（ビューワー）/30 秒（オリジン）
     - コードサイズ: 1MB（ビューワー）/50MB（オリジン）

## 一般向け解説：CloudFront って何？

### 簡単に言うと？

CloudFront は、世界中に置かれた「デジタルな倉庫」からコンテンツを配信するサービスです。例えると：

- 🏪 コンビニエンスストアのような身近な配送拠点
- 📦 Amazon の配送センター
- 📺 世界中にある放送局の中継局

### どんなことができるの？

1. **高速配信**

   ```
   例：お近くのコンビニで商品を受け取る
   ユーザー ←→ 近くの配信拠点 （遠くの本社倉庫には行かない）
   ```

2. **安全な配信**

   ```
   例：セキュリティ付きの配送
   - 本人確認付きの配達
   - 指定地域のみ配送可能
   - 不正アクセスからの保護
   ```

3. **スマートな配信**
   ```
   例：賢い配送システム
   - 需要予測による在庫配置
   - 最適な配送ルート選択
   - 混雑時の自動対応
   ```

### メリット

1. **ユーザーにとって**

   - 🚀 高速なアクセス
   - 🔒 安全な通信
   - 📱 快適な閲覧体験

2. **事業者にとって**

   - 💰 コスト削減
   - 🛡️ セキュリティ向上
   - 📊 運用負荷軽減

### よくある質問

Q1: どんなサービスで使われている？

- 🎮 オンラインゲーム
- 🎬 動画配信サービス
- 🛍️ EC サイト

Q2: 導入は難しい？

- ⚙️ AWS の管理画面から簡単設定
- 🔄 既存システムと簡単に連携
- 📝 詳細なカスタマイズも可能

Q3: コストは？

- 💰 使用量に応じた従量課金
- 📊 データ転送量で料金が決定
- 🎯 無駄のない料金体系

### まとめ

CloudFront は、以下を実現する「デジタル配送センター」です：

- 🚀 高速なコンテンツ配信
- 🌍 グローバルな展開
- 💰 コスト効率の向上
- 🛡️ 安全な配信の実現

#### セキュリティ機能って具体的に？

1. **署名付き URL の例**

   ```
   例：期間限定の映画チケット
   - 映画館のチケットのように、決められた時間だけ有効
   - 他人に譲渡できない個人専用のチケット
   - 一回限りの特別観覧券
   ```

2. **署名付き Cookie の例**
   ```
   例：会員証のようなもの
   - 図書館の会員証で本を借りるように
   - スポーツジムの会員カードのように
   - 期間限定の定期券として
   ```

#### エッジ関数って何？

1. **CloudFront Functions の例**

   ```
   例：自動販売機の仕組み
   - ボタンを押したら即座に反応
   - 簡単な判断で商品を出す
   - たくさんの人が同時に使える
   ```

2. **Lambda@Edge の例**
   ```
   例：コンビニの店員さん
   - お客様の要望に応じて商品を探す
   - 複雑な注文にも対応
   - 在庫確認や取り寄せもできる
   ```
