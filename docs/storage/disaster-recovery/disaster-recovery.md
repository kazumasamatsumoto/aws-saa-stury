# AWS ディザスタリカバリ（災害復旧）

ディザスタリカバリ（DR）は、自然災害、システム障害、人為的ミスなどによって引き起こされる予期せぬ事象からビジネスを保護し、迅速に復旧するための戦略です。

## ディザスタリカバリの主要概念

### RPO (Recovery Point Objective)

- データ損失を許容できる最大期間
- バックアップの頻度を決定する指標
- 例：RPO が 1 時間の場合、最大 1 時間分のデータ損失を許容

### RTO (Recovery Time Objective)

- システムやサービスの復旧に許容できる最大時間
- ビジネス影響度分析に基づいて設定
- 例：RTO が 4 時間の場合、4 時間以内にシステムを復旧する必要がある

## AWS のディザスタリカバリ戦略

### 1. バックアップ＆リストア

- 最も基本的な DR 戦略
- AWS Backup を使用して定期的にデータをバックアップ
- コスト効率が高いが、復旧時間が長い
- RPO/RTO が数時間から数日

### 2. パイロットライト

- 最小限のコアシステムを常時稼働
- 災害時に素早くスケールアップ可能
- 中程度のコストで比較的早い復旧が可能
- RPO/RTO が数時間程度

### 3. ウォームスタンバイ

- 縮小版の本番環境を常時稼働
- 災害時にフルスケールに拡張
- 比較的高コストだが、復旧が速い
- RPO/RTO が数分から数時間

### 4. マルチサイトアクティブ/アクティブ

- 複数のサイトで同時に本番稼働
- 最も高コストだが、最も高い可用性
- ほぼリアルタイムの復旧が可能
- RPO/RTO が数秒から数分

## AWS のディザスタリカバリサービス

### AWS Elastic Disaster Recovery

- オンプレミスやクラウドのワークロードを保護
- 継続的なレプリケーションを提供
- 迅速なフェイルオーバーと復旧をサポート

### AWS Backup

- 一元化されたバックアップ管理
- 複数の AWS サービスのバックアップを自動化
- コンプライアンス要件に対応

## リストア（復元）オプション

### 完全リストア

- システム全体を特定の時点の状態に復元
- ディザスタリカバリ時の主要な復旧方法
- AWS Backup を使用して AMI、EBS ボリューム、RDS データベースなどを復元

### 部分リストア

- 特定のデータやコンポーネントのみを復元
- 誤って削除されたデータの復旧に有効
- S3 バージョニングや RDS のポイントインタイムリカバリを活用

### クロスリージョンリストア

- 異なる AWS リージョンへのリストアが可能
- 地理的な冗長性を確保
- リージョン全体の障害に対する保護を提供

### リストア時の考慮事項

1. **整合性の確保**

   - 依存関係のあるリソース間の整合性を維持
   - アプリケーションレベルでの整合性チェック

2. **リストア優先順位**

   - 重要度に基づくリソースの復旧順序の決定
   - ビジネスクリティカルなシステムを優先

3. **リストアテスト**
   - 定期的なリストアテストの実施
   - リカバリ手順の検証と改善

## ベストプラクティス

1. **定期的なテスト**

   - DR 計画の実効性を確認
   - 復旧手順の文書化と更新

2. **自動化の活用**

   - 復旧プロセスの自動化
   - 人為的ミスの削減

3. **セキュリティの確保**

   - バックアップデータの暗号化
   - アクセス制御の適切な設定

4. **コスト最適化**
   - ビジネス要件に基づいた DR 戦略の選択
   - 定期的なコスト見直しと最適化

## まとめ

効果的なディザスタリカバリ戦略は、ビジネスの継続性を確保する上で重要です。AWS は様々な DR オプションとツールを提供しており、組織のニーズに合わせて適切な戦略を選択することが可能です。定期的な計画の見直しとテストを行うことで、実際の災害時に確実な復旧を実現できます。
